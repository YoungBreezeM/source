# nodejs多线程

### 对于网上说nodejs是单线程这个说法是不对的

node 通过v8 引擎绑定c++程序 直接编译成二进制文件运行他是多线程的，只不过javascript这个绑定语言是单线程。

### node工作方式

node 程序包括两种线程 envnt loop主线程（事件轮训线程）还有一种为工作线程 worker_thread ，先由主线程处理事件，把事件压入事件队列，然后把事件交给worker_thread 工作线程处理，这个是node 非堵塞io异步执行 ，他是依赖于事件轮训。

### node多线程使用

在以前版本10.x 以前没有可支持真多线程的功能，到了12.x node新增加 worker_thread,把子线程提出处理，作为一个可编译的模块，有助于解决cpu 密集型的业务，但是频繁创建线程和销毁线程会造成巨大内存开销（上下文切换），所以推荐使用线程池代理处理业务，减少内纯开销，`npm i worker-thread-pool` 进行线程管理。

